function gymLocation(e){this.name=ko.observable(e.name),this.address=ko.observable(e.address),this.description=ko.observable(e.description),this.latlng=ko.observable(e.latlng)}function ViewModel(){function e(e){var t,n,o,i,a="54I1UHM3AGCPB45VNROLAC23DEARBPZ3R4C0Y5QX3BDL30SV",r="SCQYO3CFBWVOHBYK4HUMBBXF3VUIF5ETZPD01BXTGBO2YW00",s="20130815";n=e.latlng.lat,o=e.latlng.lng,t="https://api.foursquare.com/v2/venues/explore?client_id="+a+"&client_secret="+r+"&v="+s+"&ll="+n+","+o+"&query="+e.query+"&limit=50",$.ajax({url:t,datatype:"jsonp",success:function(t){i=t.response.groups[0].items[0].venue,console.log(i),infoWindow.setContent('<a href="'+e.fourSqUrl+'">'+i.name+"</a><br>"+e.phone+"<br>"+e.address+"<br>"+i.location.city+", "+i.location.state+" "+i.location.postalCode+"<br>"+e.description+'<br><a href="'+e.website+'">'+e.website+'</a><br><a href="'+e.twitterLink+'">@'+e.twitter+"</a>"),infoWindow.open(map,e.marker)},error:function(t,n){setTimeout(function(){n&&(infoWindow.setContent("I'm sorry, an error has occurred. Please try again later."),infoWindow.open(map,e.marker))},2e3)}})}var t=this;t.markers=[],t.sortedLocations=ko.observableArray(initialLocations),t.sortedLocations().forEach(function(t){marker=new google.maps.Marker({position:t.latlng,map:map,title:t.name,icon:"images/gym.svg",animation:google.maps.Animation.DROP}),t.marker=marker,marker.addListener("click",function(){e(t),t.name&&t.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){t.marker.setAnimation(null)},2e3)})}),infoWindow=new google.maps.InfoWindow,t.listViewClick=function(e){google.maps.event.trigger(e.marker,"click"),this.name&&(map.setZoom(15),map.panTo(e.marker.position),e.marker.setAnimation(google.maps.Animation.BOUNCE),$(".sidebar").toggleClass("slide-out")),setTimeout(function(){e.marker.setAnimation(null)},2e3)},t.query=ko.observable("");var n=$("#search");n.change(function(){initialLocations.forEach(function(e){e.name.toLowerCase()===n.val().toLowerCase()&&(map.panTo(e.latlng),map.setZoom(15),e.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.marker.setAnimation(null)},2e3),infoWindow.setContent('<a href="'+e.fourSqUrl+'">'+e.name+"</a><br>"+e.phone+"<br>"+e.address+"<br>"+e.cityZip+"<br>"+e.description+'<br><a href="'+e.website+'">'+e.website+'</a><br><a href="'+e.twitterLink+'">@'+e.twitter+"</a>"),infoWindow.open(map,e.marker),$(".sidebar").toggleClass("slide-out"))})}),t.search=ko.computed(function(){return ko.utils.arrayFilter(t.sortedLocations(),function(e){var n=e.name.toLowerCase().indexOf(t.query().toLowerCase())>=0;return n?e.marker.setVisible(!0):e.marker.setVisible(!1),n})});var o=new google.maps.LatLngBounds({lat:40.420392,lng:-80.058305},{lat:40.458458,lng:-79.92513});map.addListener("click",function(e){infoWindow.close(),infoWindow.setContent(null),map.setZoom(13),map.panTo({lat:40.440624,lng:-79.995888}),t.query(""),map.fitBounds(o)}),google.maps.event.addDomListener(window,"resize",function(){map.setCenter({lat:40.440624,lng:-79.995888}),map.fitBounds(o)}),google.maps.event.addDomListener(window,"load",function(){map.setCenter({lat:40.440624,lng:-79.995888}),map.fitBounds(o)})}function mapError(){if("undefined"==typeof google){var e=document.getElementById("heading-text");e.textContent="I'm sorry, this page could not be loaded."}}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:40.440624,lng:-79.995888},zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}}),ko.applyBindings(ViewModel())}var initialLocations=[{name:"Fitness Factory",ID:"1",address:"214 S Highland Ave",cityZip:"Pittsburgh, PA 15206",description:"The Fitness Factory is an independent locally owned gym located in Pittsburgh’s ever expanding Shadyside neighborhood. We have been in business and serving the community for more than 20 years. Our fitness philosophy focuses on a combination of strength, cardio and wellness.",latlng:{lat:40.458458,lng:-79.92513},website:"http://fitnessfactorypgh.com/",phone:"(412) 362-6303",twitter:"FitFactoryPGH",twitterLink:"https://twitter.com/FitFactoryPGH?lang=en",query:"FitnessFactory",fourSqUrl:"https://foursquare.com/fitfactorypgh"},{name:"MÜV Integrated Physical Culture",ID:"2",address:"5469 Penn Ave",cityZip:"Pittsburgh, PA 15206",description:"At MÜV Integrated, we believe that movement and fitness should only be based on the science of the human body. We are confident in our ability to take anyone from a baseline and utilize Strategic Resistance™ manipulation to build postural endurance, strength, conditioning, mobility, speed, and power.",latlng:{lat:40.464666,lng:-79.933382},website:"http://www.muvintegrated.com/",phone:"(412) 477-5069",twitter:"muvintegrated",twitterLink:"https://twitter.com/muvintegrated?lang=en",query:"MUV",fourSqUrl:"https://foursquare.com/v/muv-integrated-physical-culture/5362e039498ef8ea0e056975"},{name:"PNC YMCA",ID:"3",address:"236 Fifth Ave Pittsburgh, PA 15222",cityZip:"Pittsburgh, PA 15222",description:"Today, the Y engages more than 10,000 neighborhoods across the U.S. As the nation’s leading nonprofit committed tohelping people and communities to learn, grow and thrive, our contributions are both far-reaching and intimate—from influencing our nation’s culture during times of profound social change to the individual support we provide an adult learning to read.",latlng:{lat:40.440763,lng:-80.001168},website:"http://www.ymcaofpittsburgh.org/locations/pnc-ymca/",phone:"(412) 471-9622",twitter:"PNCYMCA",twitterLink:"https://twitter.com/PNCYMCA?lang=en",query:"PNCYMCA",fourSqUrl:"https://foursquare.com/v/pnc-ymca/4baa8586f964a52030713ae3"},{name:"X Shadyside",ID:"4",address:"5608 Walnut St Pittsburgh",cityZip:"Pittsburgh, PA 15232",description:"Since 1994, X Shadyside 24 Hour Health and Fitness has been a leader in providing the most modern fitness solutions in the Shadyside, Squirrel Hill, Oakland, and other East End communities of Pittsburgh. Recognized for our convenient location, contemporary equipment, and strong group exercise program; we are absolutely dedicated to providing our members with the best in fitness!",latlng:{lat:40.451574,lng:-79.931729},website:"http://www.xshadyside.com/",phone:"(412) 363-9999",twitter:"XShadyside",twitterLink:"https://twitter.com/XShadyside?lang=en",query:"XShadyside",fourSqUrl:"https://foursquare.com/v/x-shadyside/4b05eb94f964a520d3e522e3"},{name:"Orangetheory Fitness",ID:"5",address:"5841 Penn Ave",cityZip:"Pittsburgh, PA 15206",description:"Orangetheory Fitness offers 60-minute workout sessions split into intervals of cardiovascular and strength training with heart rate monitors to track intensity and maximize metabolic burn. Increase energy, get visible results and burn more calories, even after leaving the studio. That's the Orange Effect!",latlng:{lat:40.462251,lng:-79.927118},website:"http://www.orangetheoryfitness.com/",phone:"(412) 362-3616",twitter:"OrangeTheoryGVR",twitterLink:"https://twitter.com/OrangeTheoryGVR?lang=en",query:"OrangetheoryFitness",fourSqUrl:"https://foursquare.com/v/orangetheory-fitness/55802dfd498e635852d13303"},{name:"Shape Training",ID:"6",address:"5877 Commerce St",cityZip:"Pittsburgh, PA 15206",description:"Our aim is to change the climate of the fitness industry by providing a dynamic, energetic, and comprehensive platform for our clients.",latlng:{lat:40.459523,lng:-79.928313},website:"http://www.shapetrain.com/",phone:"(412) 996-5016",twitter:"Shapetrain412",twitterLink:"https://twitter.com/Shapetrain412?lang=en",query:"ShapeTraining",fourSqUrl:"https://foursquare.com/v/shape-training/56deb9dccd1027669c970a96"},{name:"Gold’s Gym",ID:"7",address:"100 Forbes Ave",cityZip:"Pittsburgh, PA 15222",description:"Get fit with a membership to Gold’s Gym Pittsburgh (Market Square), located in Pittsburgh, PA. With our exceptional health club, you’ll reach your fitness goals in no time, whether you’re aiming to lose weight, flatten your abs or shred upper body muscles. Our world-class fitness experts are always ready to provide workout tips and sound fitness advice. Members at Gold’s Gym Pittsburgh (Market Square) enjoy a state-of-the-art workout facility, top-tier amenities and the best fitness options in the industry.",latlng:{lat:40.4409,lng:-80.003742},website:"http://www.goldsgym.com/",phone:"(412) 201-4653",twitter:"GoldsGym",twitterLink:"https://twitter.com/GoldsGym?lang=en",query:"GoldsGym",fourSqUrl:"https://foursquare.com/v/golds-gym/4adcc5c3f964a520a42f21e3"},{name:"Panthro Fitness",ID:"8",address:"3117 Penn Ave",cityZip:"Pittsburgh, PA 15201",description:"Consistent support to answer any question or problem you may have. Lose weight, increase muscle tone and feel more confident than ever! A greater range of motion and joint movement to keep you healthy. Learn about and implement a diet that will transform your physique.",latlng:{lat:40.460252,lng:-79.971044},website:"http://panthrofitness.com/",phone:"(412) 391-0100",twitter:"PanthroFitness",twitterLink:"https://twitter.com/PanthroFitness?lang=en",query:"PanthroFitness",fourSqUrl:"https://foursquare.com/v/panthro-fitness/51852ab6498e26796c2d9395"},{name:"terraFITNESS",ID:"9",address:"5746 Baum Blvd",cityZip:"Pittsburgh, PA 15206",description:"Everyone has individual goals, and we will work together to meet them. I talk to each client to understand their strengths, weaknesses and limitations. I then design a personal training program based on this information. I help my clients achieve, maintain, and even exceed what they once thought was impossible.",latlng:{lat:40.458625,lng:-79.931998},website:"http://www.terra-fitness.com/",phone:"(412) 901-3645",twitter:"terra_fitness",twitterLink:"https://twitter.com/terra_fitness/with_replies?lang=en",query:"terraFITNESS",fourSqUrl:"https://foursquare.com/v/terrafitness/5263d02e11d2aab0b8bd208a"},{name:"The Greentree Sportsplex",ID:"10",address:"600 Iron City Dr",cityZip:"Pittsburgh, PA 15220",description:"Think about this question for a second… Where can you find a Fitness Center, Basketball/Volleyball Courts, Badminton, 3 giant indoor turf fields that can be used for: (Soccer, Baseball, Softball, Football, Kickball, Lacrosse, Frisbee, etc…), and Indoor Batting Cages and Live Pitching Tunnels. Oh, by the way we also have our own CrossFit Gym section, D1 Sports Performance Training Gym section, Warriors Fitness Kickboxing Gym section, plus a Salsa Dance Studio section. So instead of the question of why should someone want to join our gym, lets rephrase that to “Why shouldn’t someone want to join our gym?”",latlng:{lat:40.420392,lng:-80.058305},website:"https://greentreesportsplex.com/",phone:"(412) 922-1818",twitter:"TheSportsPlex",twitterLink:"https://twitter.com/TheSportsPlex?lang=en",query:"Sportsplex",fourSqUrl:"https://foursquare.com/v/greentree-sportsplex/4b01a290f964a5201d4422e3"}],content="",map,infoWindow,marker;